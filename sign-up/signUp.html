<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sign Up</title>
	<link rel="stylesheet" href="./signup.css">
</head>

<body>
	<div class="container">
		<h2>Sign Up</h2>
		<form>
			<div class="form-group">
				<label for="name">Name:</label>
				<input type="text" id="name" name="name" required>
			</div>
			<div class="form-group">
				<label for="email">Email:</label>
				<input type="email" id="email" name="email" required>
			</div>
			<div class="form-group">
				<label for="password">Password:</label>
				<input type="password" id="password" name="password" required>
			</div>
			<div class="role">
				<div>
					<label for="volunteer">Volunteer</label><br>
					<input type="radio" id="volunteer" name="role" value="volunteer">
				</div>
				<div>
					<label for="organization">Organization</label>
					<input type="radio" id="organization" name="role" value="organization">
				</div>
			</div>
			<button class="btn" onclick="sheetsdb_signin()">Sign Up</button>
			<a href="../Signin/signin.html" style="margin: auto;">
				<p style="text-align: center;">
					Already have an account?
					Sign in here
				</p>
			</a>
		</form>
	</div>
	<script>

		function sheetsdb_signin() {
			let name = document.getElementById("name").value;
			let email = document.getElementById("email").value;
			let password = document.getElementById("password").value;
			let type;
			if (document.getElementById("volunteer").checked == true) { type = "VOL" }
			else if (document.getElementById("organization").checked == true) { type = "ORG" }

			fetch('https://sheetdb.io/api/v1/d6omx04jpy6ks', {
				method: 'POST',
				headers: {
					'Accept': 'application/json',
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					data: [
						{
							'id': "INCREMENT",
							'Name': name,
							'Email': email,
							'Password': password,
							'Type': type
						}
					]
				})
			})
				.then((response) => response.json())
				.then((data) => { console.log(data); redirect() });

		}

		function uncheck(id) {
			document.getElementById(id).checked = false;
		}

		function redirect() {
			console.log("redirect pressed")
			document.location.pathname = "/opportunities/organization.html"
		}

	</script>

</body>

</html>